{% extends 'base.html' %}
{% block title %}Alterar Senha - Mirach{% endblock %}
{% block content %}
<h2 class="mb-3"><i class="fas fa-key"></i> Alterar Senha</h2>
<form method="post" class="mt-3 col-md-6">
  {% csrf_token %}
  {% if form.non_field_errors %}
  <div class="alert alert-danger">{{ form.non_field_errors }}</div>
  {% endif %}
  <div class="mb-3">
    <label class="form-label" for="id_old_password">Senha atual</label>
    <input type="password" name="old_password" autocomplete="current-password" class="form-control" required id="id_old_password">
    {% if form.old_password.errors %}
      <div class="text-danger small mt-1">{{ form.old_password.errors|striptags }}</div>
    {% endif %}
  </div>
  <div class="mb-3">
    <label class="form-label" for="id_new_password1">Nova senha</label>
    <input type="password" name="new_password1" autocomplete="new-password" class="form-control" required id="id_new_password1">
    {% if form.new_password1.errors %}
      <div class="text-danger small mt-1">{{ form.new_password1.errors|striptags }}</div>
    {% endif %}
    {% if form.password_validators_help_text_html %}
      <div class="form-text">{{ form.password_validators_help_text_html|safe }}</div>
    {% endif %}
  </div>
  <div class="mb-3">
    <label class="form-label" for="id_new_password2">Confirmar nova senha</label>
    <input type="password" name="new_password2" autocomplete="new-password" class="form-control" required id="id_new_password2">
    {% if form.new_password2.errors %}
      <div class="text-danger small mt-1">{{ form.new_password2.errors|striptags }}</div>
    {% endif %}
  </div>
  <button class="btn btn-primary" type="submit"><i class="fas fa-save me-1"></i> Salvar</button>
  <a href="{% url 'accounts:profile' %}" class="btn btn-outline-secondary ms-2">Cancelar</a>
  <div class="mt-3">
    <small class="text-muted">Após salvar, você verá uma confirmação e poderá voltar ao seu perfil.</small>
  </div>
  {{ form.redirect_field|default_if_none:'' }}
</form>
{% endblock %}


